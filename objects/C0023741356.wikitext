{{Recipe
|HasEntityTitle=Indexing file system directories
}}

== Understanding ==

{|class=wikitable width=100%
|width=50%|
 '''user@fileserver:~$ tree'''
<syntaxhighlight lang="bash">
. # Showing only relevant files!
├── dataspects-indexer                 # Normal folder
│   ├── dataspects.db                  # Logging database
│   ├── dataspects-indexer             # Go binary from Git repo
│   └── dataspects-indexer-config.json # Indexer configuration
└── documents_to_index
</syntaxhighlight>

'''Docker Container "dataspects-indexing-service"''' (https://github.com/dataspects/dataspects-indexing-service)
* --env MASTERKEY=
* --volume [https://github.com/dataspects/FindAndLearnIndexerClasses FindAndLearnIndexerClasses]:/lib/custom-indexer-classes # Git repo volumed into container
* (No ports exposed since it's going through NGNIX reverse proxy)

|
 ~/dataspects-indexer/'''dataspects-indexer-config.json'''
<syntaxhighlight lang="json">
{
  "FilenameRegex": ".pdf",
  "RootFolder": "/home/user/documents_to_index",
  "DataspectsIndexingWebserviceURL": "https://indexer.hapa.ch", # Points to NGINX reverse proxy
  "TikaURL": "https://tika.hapa.ch", # Points to NGINX reverse proxy
  "TikaUsername": "USERNAME",
  "TikaPassword": "PASSWORD",
  "APIMasterKey": "",
  "IndexerClassName": "FindAndLearnDocumentsIndexer"
}
</syntaxhighlight>
[[C190110142823|How to get the APIMasterKey]]
|}

== Run TIKA somewhere ==

* E.g. https://github.com/LogicalSpark/docker-tikaserver e.g. served at http://localhost:9998 as part of https://github.com/dataspects/dataspectsSystem.

== Run dataspects-indexing-service ==

[[C190110142823]]

== Execute indexing ==

 user@fileserver:~/dataspects-indexer$ '''./dataspects-indexer --config dataspects-indexer-config.json --indexer LEXP51'''
